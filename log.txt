
running 1 test
2026-01-29 22:22:40 [INFO] lsm_tree::test: application is starting
2026-01-29 22:22:40 [INFO] lsm_tree::test: after startup Lsm { memtable: Some(MemTable { tree: {}, bloom_filter: BloomFilter { value: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], size: 15 } }), immutable_memtable: None, key_cache: RwLock { data: Cache { bloom_filters: {}, indexes: {} }, poisoned: false, .. } }
2026-01-29 22:22:40 [INFO] lsm_tree::structures::lsm: Adding an element with key:1 and value:test1
2026-01-29 22:22:40 [INFO] lsm_tree::structures::write_ahead_logger: writing to wal operation Put key 1 value test1
2026-01-29 22:22:40 [INFO] lsm_tree::structures::write_ahead_logger: reading file test-data/wals/1.txt
2026-01-29 22:22:40 [INFO] lsm_tree::structures::write_ahead_logger: file test-data/wals/1.txt openned
2026-01-29 22:22:40 [INFO] lsm_tree::structures::bloom_filter: updating the bloomfilter with key 1
2026-01-29 22:22:40 [INFO] lsm_tree::structures::lsm: Adding an element with key:2 and value:test2
2026-01-29 22:22:40 [INFO] lsm_tree::structures::write_ahead_logger: writing to wal operation Put key 2 value test2
2026-01-29 22:22:40 [INFO] lsm_tree::structures::write_ahead_logger: reading file test-data/wals/1.txt
2026-01-29 22:22:40 [INFO] lsm_tree::structures::write_ahead_logger: file test-data/wals/1.txt openned
2026-01-29 22:22:40 [INFO] lsm_tree::structures::bloom_filter: updating the bloomfilter with key 2
2026-01-29 22:22:40 [INFO] lsm_tree::structures::lsm: Adding an element with key:3 and value:test3
2026-01-29 22:22:40 [INFO] lsm_tree::structures::write_ahead_logger: writing to wal operation Put key 3 value test3
2026-01-29 22:22:40 [INFO] lsm_tree::structures::write_ahead_logger: reading file test-data/wals/1.txt
2026-01-29 22:22:40 [INFO] lsm_tree::structures::write_ahead_logger: file test-data/wals/1.txt openned
2026-01-29 22:22:40 [INFO] lsm_tree::structures::bloom_filter: updating the bloomfilter with key 3
2026-01-29 22:22:40 [INFO] lsm_tree::structures::lsm: Adding an element with key:4 and value:test4
2026-01-29 22:22:40 [INFO] lsm_tree::structures::write_ahead_logger: writing to wal operation Put key 4 value test4
2026-01-29 22:22:40 [INFO] lsm_tree::structures::write_ahead_logger: reading file test-data/wals/1.txt
2026-01-29 22:22:40 [INFO] lsm_tree::structures::write_ahead_logger: file test-data/wals/1.txt openned
2026-01-29 22:22:40 [INFO] lsm_tree::structures::bloom_filter: updating the bloomfilter with key 4
2026-01-29 22:22:40 [INFO] lsm_tree::structures::lsm: Adding an element with key:5 and value:test5
2026-01-29 22:22:40 [INFO] lsm_tree::structures::write_ahead_logger: writing to wal operation Put key 5 value test5
2026-01-29 22:22:40 [INFO] lsm_tree::structures::write_ahead_logger: reading file test-data/wals/1.txt
2026-01-29 22:22:40 [INFO] lsm_tree::structures::write_ahead_logger: file test-data/wals/1.txt openned
2026-01-29 22:22:40 [INFO] lsm_tree::structures::bloom_filter: updating the bloomfilter with key 5
2026-01-29 22:22:40 [INFO] lsm_tree::structures::lsm: Adding an element with key:6 and value:test6
2026-01-29 22:22:40 [INFO] lsm_tree::structures::write_ahead_logger: writing to wal operation Put key 6 value test6
2026-01-29 22:22:40 [INFO] lsm_tree::structures::write_ahead_logger: reading file test-data/wals/1.txt
2026-01-29 22:22:40 [INFO] lsm_tree::structures::write_ahead_logger: file test-data/wals/1.txt openned
2026-01-29 22:22:40 [INFO] lsm_tree::structures::lsm: persisting the memtable to file
2026-01-29 22:22:40 [INFO] lsm_tree::structures::bloom_filter: updating the bloomfilter with key 6
2026-01-29 22:22:40 [INFO] lsm_tree::structures::lsm: Adding an element with key:7 and value:test7
2026-01-29 22:22:40 [INFO] lsm_tree::structures::write_ahead_logger: writing to wal operation Put key 7 value test7
2026-01-29 22:22:40 [INFO] lsm_tree::structures::ss_table: writing to a file test-data/sstables/1769721760147.txt
2026-01-29 22:22:40 [INFO] lsm_tree::structures::write_ahead_logger: reading file test-data/wals/2.txt
2026-01-29 22:22:40 [INFO] lsm_tree::structures::write_ahead_logger: file test-data/wals/2.txt openned
2026-01-29 22:22:40 [INFO] lsm_tree::structures::ss_table: updating cache with a file test-data/sstables/1769721760147.txt 
2026-01-29 22:22:40 [INFO] lsm_tree::structures::bloom_filter: updating the bloomfilter with key 7
2026-01-29 22:22:40 [INFO] lsm_tree::structures::ss_table: indexes to write [IndexRecord { start: "1", end: "2", offset: 0, size: 16 }, IndexRecord { start: "3", end: "4", offset: 16, size: 16 }, IndexRecord { start: "5", end: "5", offset: 32, size: 8 }]
2026-01-29 22:22:40 [INFO] lsm_tree::structures::lsm: Adding an element with key:8 and value:test8
2026-01-29 22:22:40 [INFO] lsm_tree::structures::write_ahead_logger: writing to wal operation Put key 8 value test8
2026-01-29 22:22:40 [INFO] lsm_tree::structures::write_ahead_logger: reading file test-data/wals/2.txt
2026-01-29 22:22:40 [INFO] lsm_tree::structures::write_ahead_logger: file test-data/wals/2.txt openned
2026-01-29 22:22:40 [INFO] lsm_tree::structures::bloom_filter: updating the bloomfilter with key 8
2026-01-29 22:22:40 [INFO] lsm_tree::structures::lsm: deleting a record with key 2
2026-01-29 22:22:40 [INFO] lsm_tree::structures::write_ahead_logger: writing to wal operation Delete key 2 value 
2026-01-29 22:22:40 [INFO] lsm_tree::structures::write_ahead_logger: reading file test-data/wals/2.txt
2026-01-29 22:22:40 [INFO] lsm_tree::structures::write_ahead_logger: file test-data/wals/2.txt openned
2026-01-29 22:22:40 [INFO] lsm_tree::structures::lsm: Adding an element with key:10 and value:test10
2026-01-29 22:22:40 [INFO] lsm_tree::structures::write_ahead_logger: writing to wal operation Put key 10 value test10
2026-01-29 22:22:40 [INFO] lsm_tree::structures::write_ahead_logger: reading file test-data/wals/2.txt
2026-01-29 22:22:40 [INFO] lsm_tree::structures::write_ahead_logger: file test-data/wals/2.txt openned
2026-01-29 22:22:40 [INFO] lsm_tree::structures::bloom_filter: updating the bloomfilter with key 10
2026-01-29 22:22:40 [INFO] lsm_tree::test: lsm after inserting the values Lsm { memtable: Some(MemTable { tree: {"10": Some("test10"), "2": None, "6": Some("test6"), "7": Some("test7"), "8": Some("test8")}, bloom_filter: BloomFilter { value: [1, 0, 1, 0, 1, 0, 0, 1, 0, 1, 1, 0, 1, 1, 1], size: 15 } }), immutable_memtable: Some(MemTable { tree: {"1": Some("test1"), "2": Some("test2"), "3": Some("test3"), "4": Some("test4"), "5": Some("test5")}, bloom_filter: BloomFilter { value: [1, 1, 1, 1, 0, 0, 1, 0, 1, 1, 1, 0, 0, 1, 1], size: 15 } }), key_cache: RwLock { data: Cache { bloom_filters: {"test-data/sstables/1769721760147.txt": BloomFilter { value: [1, 1, 1, 1, 0, 0, 1, 0, 1, 1, 1, 0, 0, 1, 1], size: 15 }}, indexes: {"test-data/sstables/1769721760147.txt": [IndexRecord { start: "1", end: "2", offset: 0, size: 16 }, IndexRecord { start: "3", end: "4", offset: 16, size: 16 }, IndexRecord { start: "5", end: "5", offset: 32, size: 8 }]} }, poisoned: false, .. } }
2026-01-29 22:22:40 [INFO] lsm_tree::structures::lsm: value found in immutable_memtable key: 1 value Some("test1")
2026-01-29 22:22:40 [INFO] lsm_tree::structures::lsm: value found in immutable_memtable key: 4 value Some("test4")
2026-01-29 22:22:40 [INFO] lsm_tree::structures::lsm: value found in memtable key: 6 value Some("test6")
2026-01-29 22:22:40 [INFO] lsm_tree::structures::lsm: value found in memtable key: 2 value None
2026-01-29 22:22:40 [INFO] lsm_tree::structures::lsm: key abc not found in memtable or immutable_memtable
2026-01-29 22:22:40 [INFO] lsm_tree::structures::bloom_filter: searching the bloomfilter for key abc
2026-01-29 22:22:40 [INFO] lsm_tree::structures::bloom_filter: false
2026-01-29 22:22:40 [INFO] lsm_tree::structures::lsm: files found containsing the key []
test test::test ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

